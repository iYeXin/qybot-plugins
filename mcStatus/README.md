# MC服务器状态插件

基于 QYbot 的 Minecraft 服务器状态监控插件，支持实时查询服务器在线状态及玩家信息。

## 功能特性

- 实时检测服务器在线状态
- 支持自定义状态显示模板
- 自动格式化玩家列表
- 智能超时处理机制

## 使用说明

### 基础指令
```
@bot mc
```

### 指令示例
```
用户：@bot mc
机器人：
【MC服务器状态】
版本：1.20.1
在线人数：3/20
在线玩家：Steve, Alex, Herobrine

欢迎来到魔法世界！
```

## 配置要求

在 `config.js` 中配置：
```
module.exports = {
    // 服务器地址（格式：域名或IP:端口）
    SERVER_ADDRESS: "mc.example.com:25565",

    // 离线提示消息
    OFFLINE_MESSAGE: "喵呜~~服务器不在线呢~嘻嘻嘻",

    // 在线状态模板（支持多行）
    get ONLINE_TEMPLATE() {
        return `
【MC服务器状态】
版本：{version}
在线人数：{online}/{max}
在线玩家：{players}

{motd}`;
    },

    // 请求超时时间（毫秒）
    TIMEOUT: 10000
};
```

## 注意事项

1. 服务器地址需包含端口号
2. 建议超时时间不低于5000ms
3. 玩家列表为空时会自动显示"暂无在线玩家"
4. 支持 MOTD 含颜色代码的原始显示

## 安装步骤

1. 将插件目录放入 `/plugins`
2. 配置 `config.js`
3. 重启机器人或等待插件热重载
4. 在控制台添加指令：`mc`

## 错误处理

- 服务器无响应时返回离线提示
- 网络异常自动重试 2 次

## 技术细节

通过 `MCStatusChecker` 实现核心状态检查功能，支持：
- SRV 记录解析
- 玩家列表排序
- MOTD 颜色代码保留
- 智能缓存机制（5分钟更新间隔）
